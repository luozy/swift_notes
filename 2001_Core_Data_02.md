Core Data 学习笔记（二）被管理对象模型
===

## 三、被管理对象模型

CoreData的大多数功能依赖于你创建的用于描述实体、实体属性以及实体间关系的Schema。Schema被表述为一个[被管理对象模型（NSManagedObjectModel）]()实例对象。通常，这个实例对象越丰富，CoreData对你应用程序的支持越好。

### 3.1 被管理对象模型特点

被管理对象模型有如下特点：

* 被管理对象模型是一个`NSManagedObjectModel`类的实例。
* 它描述你在应用中使用的数据实体的Schema。

详情描述如下。

#### 3.1.1 实体（Entities）

一个模型包含[`NSEntityDescription`]()对象，该对象用于描述一个实体的名称，以及在运行时被使用来表达这个类的实体的名称。一个`NSEntityDescription`对象还可能包含[`NSAttributeDescription`]()以及[`NSRelationshipDescription`]()两个对象。数据实体可能还包含由[`NSFetchedPropertyDescription`]()类的实例来表达的可提取属性。模型还可能有提取请求模板，由[`NSFetchRequest`]()的实例来表达。

> 注意：
>
> * 在一个模型当中，实体可能被排列在一个继承结构当中，实体也可能是抽象的。

__实体继承__

对象实体间的继承与类对象的继承类似，都是用于将多个实体相同的属性抽象出来放到父实体当中，从而可以减少重复创建、维护相同属性的工作。

> 注意：
>
> * 如果你在代码中创建实体继承关系，你必须使用自顶向下的方向进行创建。也就是说，你不可以先创建一个子实体，然后给这个子实体指定父实体。但是你可以创建一个父实体，然后为这个父实体指定子实体（使用`.setSubentities`方法）。

__抽象实体__

可以指定一个实体为抽象的，也就是说在应用程序中不会创建这个实体的实例。当在应用中，有大量的类有相同的一些属性，我们可以将这些属性抽象出来，组成一个抽象实体，然后让使用这些通用属性的实体去继承这个抽象实体。这样我们就完成了对于代码的复用。

#### 3.1.2 实体性质（Properties）

一个实体的性质一般是指其属性（Attribute）以及与其他实体间的关系，包含提取属性（Fetched Property）。实体的属性不能以任何没有参数的`NSObject`或`NSManagedObject`类成员函数名来命名。以避免混淆。

临时属性是作为模型的一部分来定义的，但是临时属性不会作为实体数据的一部分来持久化到数据存储当中。CoreData追踪你对临时属性进行的更改，所以它们被记录以便回滚操作。

__实体属性__

CoreData原生支持多种属性类型，如字符串、日期、整型。如果你想要使用原生没有的类型作为实体属性的类型，可以使用在[Non-Standard Persistent Attributes]()描述的几种方法。

__实体关系__

#### 3.1.3 提取模板
#### 3.1.4 用户信息模板
#### 3.1.5 配置

## 四、被管理对象模型的使用



## 参考

* [Managed Object Models]()
* [Using a Managed Object Model]()
